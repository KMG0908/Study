## 교착상태(Deadlock)
### 개념
* 운영체제 혹은 소프트웨어의 잘못된 자원 관리로 인하여 둘 이상의 프로세스(심하면 운영체제 자체도 포함해서)가 함께 **멈추어 버리는 현상**

### 발생 조건
#### 1. 상호 배제(Mutual exclusion)
* 하나의 자원을 하나의 프로세스만이 사용할 수 있다. 
* 한 자원에 대해 여러 프로세스의 동시 접근이 불가능하다.

#### 2. 점유와 대기(Hold and wait)
* 자원을 가지고 있는 상태에서 다른 프로세스가 사용하고 있는 자원의 반납을 기다리고 있다.

#### 3. 비선점(No preemption)
* 다른 프로세스가 가지고 있는 자원을 강제로 뺏어올 수 없다.

#### 4. 환형 대기 (Circular wait)
* 각 프로세스는 순환적으로 다음 프로세스가 요구하는 자원을 가지고 있다.

### 해결 방법
#### 1. 예방(Prevention)
교착 상태 발생 조건 중 하나를 제거함으로써 해결한다.
##### 상호 배제 부정
여러 개의 프로세스가 공유 자원을 사용할 수 있도록 한다.
##### 점유와 대기 부정
한 프로세스에 수행되기 전에 모든 자원을 할당시키고 나서 점유하지 않을 때에는 다른 프로세스가 자원을 요구하도록 한다. 
자원 과다 사용으로 인한 효율성, 프로세스가 요구하는 자원을 파악하는 데에 대한 비용, 자원에 대한 내용을 저장 및 복원하기 위한 비용, 기아상태, 무한 대기 등의 문제점이 있다.
##### 비선점 부정
자원을 점유하고 있는 프로세스가 다른 자원을 요구할 때 점유하고 있는 자원을 반납하고, 요구한 자원을 사용하기 위해 기다리게 한다.
##### 환형 대기 부정
자원에 고유한 번호를 할당하고, 번호 순서대로 자원을 요구하도록 한다.

#### 2. 회피(Avoidance)
교착 상태가 발생하면 피한다.
##### 자원 할당 그래프 알고리즘(Resource Allocation Graph Algorithm)
##### 은행원 알고리즘 (Banker’s Algorithm)
* 프로세스가 자원을 요구할 때 시스템은 자원을 할당한 후에도 안정 상태로 남아있게 되는지를 사전에 검사하여 교착 상태를 회피하는 기법
* 안정 상태에 있으면 자원을 할당하고, 그렇지 않으면 다른 프로세스들이 자원을 해지할 때까지 대기

#### 3. 회복(Recovery)
교착 상태를 일으킨 프로세스를 종료하거나, 할당된 자원을 해제함으로써 회복한다.
##### 프로세스 종료
1. 교착 상태의 프로세스를 모두 중지
2. 교착 상태가 제거될 때까지 한 프로세스씩 중지
##### 자원 선점
1. 교착 상태의 프로세스가 점유하고 있는 자원을 선점하여 다른 프로세스에게 할당하며, 해당 프로세스를 일시 정지시킨다.
2. 우선 순위가 낮은 프로세스, 수행된 횟수가 적은 프로세스 등을 위주로 프로세스의 자원을 선점한다.

#### 4. 무시(Ignore)
교착 상태에 의한 성능 저하보다 이를 해결할 때의 성능 저하가 더 큰 경우 이를 무시한다.

#### 5. 탐지(Detection)
교착 상태를 참지한다.

> 이 글은 https://includestdio.tistory.com/12 와 https://junsday.tistory.com/32 를 바탕으로 작성되었습니다.
